apply from: "../gradle/shared.gradle"

dependencies {
  compile(group: "org.apache.thrift", name: "libthrift", version: "0.9.1", configuration: "default") {
    exclude(module:"slf4j-api")
  }
  compile(group: "org.slf4j", name: "slf4j-api", version: libVersions.slf4j, configuration: "default")
  compile(project(":atlasdb-commons"))
  compile('org.apache.cassandra:cassandra-thrift:2.1.2') {
    exclude(module:"slf4j-api")
  }
  compile(group: "org.xerial.snappy", name: "snappy-java", version: "1.1.0.1", configuration: "default") {
    exclude(group: "osgi.osgi")
  }
  //compile project(path: ':datastax-cassandra-driver-core', configuration: 'shadow')
}

// Add a classifier to properly pick up the datastax dependency
//publishing {
//    publications {
//        local(MavenPublication) {
//            pom.withXml {
//                def node = asNode();
//                node.depthFirst().each { n ->
//                    if (n instanceof Node && n.text() == "datastax-cassandra-driver-core") {
//                        n.parent().appendNode('classifier', 'all')
//                        return;
//                    }
//                }
//            }
//        }
//    }
//}
