

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Changelog &mdash; AtlasDB develop documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/release-notes.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
    <link rel="top" title="AtlasDB develop documentation" href="../index.html"/>
        <link rel="up" title="Releases" href="index.html"/>
        <link rel="next" title="Release Process" href="release-process.html"/>
        <link rel="prev" title="Releases" href="index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> AtlasDB
          

          
          </a>

          
            
            
              <div class="version">
                develop
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schemas/index.html">Schemas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../transactions/index.html">Transactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cluster_management/index.html">Cluster Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../miscellaneous/index.html">Miscellaneous</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Releases</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Changelog</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="release-process.html">Release Process</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">AtlasDB</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Releases</a> &raquo;</li>
      
    <li>Changelog</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="https://github.com/palantir/atlasdb/blob/develop/docs/source/release_notes/release-notes.rst" class="fa fa-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="changelog">
<h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="v0-11-0">
<h2>v0.11.0<a class="headerlink" href="#v0-11-0" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>A utility method was removed in the previous release, breaking an internal product that relied on it. This method has now been added back.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/661">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-10-0">
<h2>v0.10.0<a class="headerlink" href="#v0-10-0" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-changed">CHANGED</span></td>
<td>Updated HikariCP dependency from 2.4.3 to 2.4.7 to comply with updates in internal products.
Details of the HikariCP changes can be found <a class="reference external" href="https://github.com/brettwooldridge/HikariCP/blob/dev/CHANGES">here</a>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/662">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-new">NEW</span></td>
<td><p class="first">AtlasDB currently allows you to create dynamic columns (wide rows), but you can only retrieve entire rows or specific columns.
Typically with dynamic columns, you do not know all the columns you have in advance, and this features allows you to page through dynamic columns per row, reducing pressure on the underlying KVS.
Products or clients (such as AtlasDB Sweep) making use of wide rows should consider using <code class="docutils literal"><span class="pre">getRowsColumnRange</span></code> instead of <code class="docutils literal"><span class="pre">getRows</span></code> in <code class="docutils literal"><span class="pre">KeyValueService</span></code>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/582">Pull Request</a>)</p>
<p class="last">Note: This is considered a beta feature and is not yet being used by AtlasDB Sweep.</p>
</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>We properly check that cells are not set to empty (zero-byte) or null.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/663">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Cassandra client connection pooling will now evict idle connections over a longer period of time and has improved logic
for deciding whether or not a node should be blacklisted.  This should result in less connection churn
and therefore lower latency.  (<a class="reference external" href="https://github.com/palantir/atlasdb/pull/667">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-9-0">
<h2>v0.9.0<a class="headerlink" href="#v0-9-0" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-breaking">BREAKING</span></td>
<td><p class="first">Inserting an empty (size = 0) value into a <code class="docutils literal"><span class="pre">Cell</span></code> will now throw an <code class="docutils literal"><span class="pre">IllegalArgumentException</span></code>. (<a class="reference external" href="https://github.com/palantir/atlasdb/issues/156">#156</a>) Likely empty
values include empty strings and empty protobufs.</p>
<p>Atlas cannot currently distinguish between empty and deleted cells. In previous versions of Atlas, inserting
an empty value into a <code class="docutils literal"><span class="pre">Cell</span></code> would delete that cell. Thus, in this snippet,</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Transaction</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">table</span><span class="o">,</span> <span class="n">ImmutableMap</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">myCell</span><span class="o">,</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">0</span><span class="o">]))</span>
<span class="n">Transaction</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">table</span><span class="o">,</span> <span class="n">ImmutableSet</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">myCell</span><span class="o">)).</span><span class="na">get</span><span class="o">(</span><span class="n">myCell</span><span class="o">)</span>
</pre></div>
</div>
<p>the second line will return <code class="docutils literal"><span class="pre">null</span></code> instead of a zero-length byte array.</p>
<p>To minimize confusion, we explicitly disallow inserting an empty value into a cell by throwing an
<code class="docutils literal"><span class="pre">IllegalArgumentException</span></code>.</p>
<p>In particular, this change will break calls to <code class="docutils literal"><span class="pre">Transaction.put(TableReference</span> <span class="pre">tableRef,</span> <span class="pre">Map&lt;Cell,</span> <span class="pre">byte[]&gt;</span> <span class="pre">values)</span></code>,
as well as generated code which uses this method, if any entry in <code class="docutils literal"><span class="pre">values</span></code> contains a zero-byte array. If your
product does not need to distinguish between empty and non-existent values, simply make sure all the <code class="docutils literal"><span class="pre">values</span></code>
entries have positive length. If the distinction is necessary, you will need to explicitly differentiate the
two cases (for example, by introducing a sentinel value for empty cells).</p>
<p>If any code deletes cells by calling <code class="docutils literal"><span class="pre">Transaction.put(...)</span></code> with an empty array, use
<code class="docutils literal"><span class="pre">Transaction.delete(...)</span></code> instead.</p>
<p class="last"><em>Note</em>: Existing cells with empty values will be interpreted as deleted cells, and will not lead to Exceptions when read.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/524">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>The warning emitted when an attempted leadership election fails is now more descriptive.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/630">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td><p class="first">Code generation for the <code class="docutils literal"><span class="pre">hashCode</span></code> of <code class="docutils literal"><span class="pre">*IdxColumn</span></code> classes now uses <code class="docutils literal"><span class="pre">deepHashCode</span></code> for its arrays such that it returns
consistent hash codes for use with hash-based collections (HashMap, HashSet, HashTable).
This issue will only appear if you are instantiating columns in multiple places and storing columns in hash collections.</p>
<p class="last">If you are using <a class="reference external" href="https://palantir.github.io/atlasdb/html/schemas/tables_and_indices.html#indices">Indices</a> we recommend you upgrade as a precaution and ensure you are not relying on logic related to the <code class="docutils literal"><span class="pre">hashCode</span></code> of auto-generated <code class="docutils literal"><span class="pre">*IdxColumn</span></code> classes.
You will need to regenerate your schema code in order to see this fix.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/600">Pull Request</a>)</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-8-0">
<h2>v0.8.0<a class="headerlink" href="#v0-8-0" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Some logging was missing important information due to use of the wrong substitution placeholder. This version should be taken in preference to 0.7.0 to ensure logging is correct.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/642">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-7-0">
<h2>v0.7.0<a class="headerlink" href="#v0-7-0" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-new">NEW</span></td>
<td>Atlas can now be backed by Postgres via DB KVS. This is a very early release for this feature, so please contact us if you
plan on using it. Please see <a class="reference external" href="http://palantir.github.io/atlasdb/html/configuration/postgres_key_value_service_config.html">the documentation</a> for more details.</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>The In Memory Key Value Service now makes defensive copies of any data stored or retrieved. This may lead to a slight performance degradation to users of In Memory Key Value Service.
In Memory Key Value Service is recommended for testing environments only and production instances should use DB KVS or Cassandra KVS for data that needs to be persisted.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/552">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Atlas will no longer log incorrect errors stating &#8220;Couldn&#8217;t grab new token ranges for token aware cassandra mapping&#8221; when running against a single node and single token Cassandra cluster.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/634">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Read heavy workflows with Cassandra KVS will now use substantially less heap. In worst-case testing this change resulted in a 10-100x reduction in client side heap size.
However, this is very dependent on the particular scenario AtlasDB is being used in and most consumers should not expect a difference of this size.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/568">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-6-0">
<h2>v0.6.0<a class="headerlink" href="#v0-6-0" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>A potential race condition could cause timestamp allocation to never complete on a particular node (#462)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>An innocuous error was logged once for each TransactionManager about not being able to allocate
enough timestamps. The error has been downgraded to INFO and made less scary.</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Serializable Transactions that read a column selection could consistently report conflicts when there were none.</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>An excessively long Cassandra related logline was sometimes printed (#501)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-5-0">
<h2>v0.5.0<a class="headerlink" href="#v0-5-0" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-changed">CHANGED</span></td>
<td>Only bumping double minor version in artifacts for long-term stability fixes</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-4-1">
<h2>v0.4.1<a class="headerlink" href="#v0-4-1" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Prevent _metadata tables from triggering the Cassandra 2.x schema mutation bug <a class="reference external" href="https://github.com/palantir/atlasdb/issues/431">431</a> (<a class="reference external" href="https://github.com/palantir/atlasdb/issues/444">444</a> not yet fixed)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Required projects are now Java 6 compliant</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="release-process.html" class="btn btn-neutral float-right" title="Release Process" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Releases" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Palantir Technologies.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'develop',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>