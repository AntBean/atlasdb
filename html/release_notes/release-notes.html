

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Changelog &mdash; OSS AtlasDB develop documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/release-notes.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="OSS AtlasDB develop documentation" href="../index.html"/>
        <link rel="up" title="Releases" href="index.html"/>
        <link rel="next" title="Release Process" href="release-process.html"/>
        <link rel="prev" title="Releases" href="index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> OSS AtlasDB
          

          
          </a>

          
            
            
              <div class="version">
                develop
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schemas/index.html">Schemas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../transactions/index.html">Transactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cluster_management/index.html">Cluster Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/index.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance/index.html">Performance Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../miscellaneous/index.html">Miscellaneous</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting/index.html">Troubleshooting</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Releases</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Changelog</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="release-process.html">Release Process</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">OSS AtlasDB</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Releases</a> &raquo;</li>
      
    <li>Changelog</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="https://github.com/palantir/atlasdb/blob/develop/docs/source/release_notes/release-notes.rst" class="fa fa-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="changelog">
<span id="change-log"></span><h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="develop">
<h2>develop<a class="headerlink" href="#develop" title="Permalink to this headline">¶</a></h2>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>AtlasDB Perf Cli can now output KVS-agnostic benchmark data (such as <code class="docutils literal"><span class="pre">HttpBenchmarks</span></code>) to a file.
Previously running these benchmarks whilst attempting to write output to a file would fail.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1635">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-33-0">
<h2>v0.33.0<a class="headerlink" href="#v0-33-0" title="Permalink to this headline">¶</a></h2>
<p>22 Feb 2017</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>AtlasDB HTTP clients are now compatible with OkHttp 3.3.0+, and no longer assume that header names are specified in Train-Case.
This fix enables the Timelock server and AtlasDB clients to use HTTP/2.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1613">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Canonicalised SQL strings will now have contiguous whitespace rendered as a single space as opposed to the first character of said whitespace.
This is important for backwards compatibility with an internal product.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1603">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-new">NEW</span></td>
<td><p class="first">Added the option to perform a dry run of sweep via the <a class="reference internal" href="../cluster_management/sweep/sweep-cli.html#atlasdb-sweep-cli"><span class="std std-ref">Sweep CLI</span></a>.
When <code class="docutils literal"><span class="pre">--dry-run</span></code> is set, sweep will tell you how many cells would have been deleted, but will not actually delete any cells.</p>
<p class="last">This feature was introduced to avoid accidentally generating more tombstones than the Cassandra tombstone threshold (default 100k) introduced in <a class="reference external" href="https://issues.apache.org/jira/browse/CASSANDRA-6117">CASSANDRA-6117</a>.
If you delete more than 100k cells and thus cross the Cassandra threshold, then Cassandra may reject read requests until the tombstones have been compacted away.
Customers wishing to run Sweep should first run with the <code class="docutils literal"><span class="pre">--dry-run</span></code> option and only continue if the number of cells to be deleted is fewer than 100k.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1598">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Fixed atlasdb-commons Java 1.6 compatibility by removing tracing from <code class="docutils literal"><span class="pre">InterruptibleProxy</span></code>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1599">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td><p class="first">Persisted locks table is now considered an Atomic Table.</p>
<p class="last"><code class="docutils literal"><span class="pre">ATOMIC_TABLES</span></code> are those that must always exist on KVSs that support check-and-set (CAS) operations.
This is particularly relevant for AtlasDB clients that make use of the TableSplittingKVS and want to keep tables on different KVSs.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1610">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Reverted PR #1577 in 0.32.0 because this change prevents AtlasDB clients from downgrading to earlier versions of AtlasDB.
We will merge a fix for MRTSE once we have a solution that allows a seamless rollback process.
This change is also reverted on 0.32.1.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1622">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Reduced contention on <code class="docutils literal"><span class="pre">PersistentTimestampService.getFreshTimestamps</span></code> to provide performance improvements to the Timestamp service under heavy request load.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1618">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-32-1">
<h2>v0.32.1<a class="headerlink" href="#v0-32-1" title="Permalink to this headline">¶</a></h2>
<p>21 Feb 2017</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Reverted PR #1577 in 0.32.0 because this change prevents AtlasDB clients from downgrading to earlier versions of AtlasDB.
We will merge a fix for MRTSE once we have a solution that allows a seamless rollback process.
This change is also reverted on develop.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1622">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-32-0">
<h2>v0.32.0<a class="headerlink" href="#v0-32-0" title="Permalink to this headline">¶</a></h2>
<p>16 Feb 2017</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Fixed erroneous occurrence of <code class="docutils literal"><span class="pre">MultipleRunningTimestampServicesError</span></code> (see <a class="reference external" href="https://github.com/palantir/atlasdb/issues/1000">#1000</a>) where the timestamp service was unaware of successfully writing the new timestamp limit to the DB.
This fix only applies to Cassandra backed AtlasDB clients who are not using the external Timelock service.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1577">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>AtlasDB HTTP clients will now have a user agent of <code class="docutils literal"><span class="pre">&lt;project.name&gt;-atlasdb</span> <span class="pre">(project.version)</span></code> as opposed to <code class="docutils literal"><span class="pre">okhttp/2.5.0</span></code>.
This should make distinguishing AtlasDB request logs from application request logs much easier.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1535">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-new">NEW</span></td>
<td><p class="first">Sweep now takes out a lock to ensure data is not corrupted during online backups.</p>
<p class="last">Users performing <a class="reference internal" href="../cluster_management/backup-restore.html#backup-restore"><span class="std std-ref">live backups</span></a> should grab this lock before performing a backup of the underlying KVS, and then release the lock once the backup is complete.
This enables the backup to safely run alongside either the <a class="reference internal" href="../cluster_management/sweep/background-sweep.html#background-sweep"><span class="std std-ref">background sweeper</span></a> or the <a class="reference internal" href="../cluster_management/sweep/sweep-cli.html#atlasdb-sweep-cli"><span class="std std-ref">sweep CLI</span></a>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1509">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-new">NEW</span></td>
<td>Initial support for tracing Key Value Services integrating with <a class="reference external" href="https://github.com/palantir/http-remoting#tracing">http-remoting tracing</a>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1385">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Improved heap usage during heavy DBKVS querying by reducing mallocs in <code class="docutils literal"><span class="pre">SQLString.canonicalizeString()</span></code>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1560">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Removed an unused hamcrest import from the timestamp-impl project.
This should reduce the size of our transitive dependencies, and therefore the size of product binaries.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1578">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-breaking">DEV BREAK</span></td>
<td>Modified the type signature of <code class="docutils literal"><span class="pre">BatchingVisitableView#of</span></code> to no longer accept <code class="docutils literal"><span class="pre">final</span> <span class="pre">BatchingVisitable&lt;?</span> <span class="pre">extends</span> <span class="pre">T&gt;</span> <span class="pre">underlyingVisitable</span></code> and instead accept <code class="docutils literal"><span class="pre">final</span> <span class="pre">BatchingVisitable&lt;T&gt;</span> <span class="pre">underlyingVisitable</span></code>.
This will resolve an issue where newer versions of Intellij fail to compile AtlasDB.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1582">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Reduced logging noise from large Cassandra gets and puts by removing ERROR messages and only providing stacktraces at DEBUG.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1590">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-new">NEW</span></td>
<td><p class="first">Upon startup of an AtlasDB client with a <code class="docutils literal"><span class="pre">timeblock</span></code> <a class="reference internal" href="../configuration/external_timelock_service_configs/timelock_client_config.html#timelock-client-configuration"><span class="std std-ref">config block</span></a>, the client will now automatically migrate its timestamp to the the <a class="reference internal" href="../services/timelock_service/index.html#external-timelock-service"><span class="std std-ref">external Timelock cluster</span></a>.</p>
<p>The client will fast-forward the Timelock Server&#8217;s timestamp bound to that of the embedded service.
The client will now also <em>invalidate</em> the embedded service&#8217;s bound, backing this up in a separate row in the timestamp table.</p>
<p class="last">Automated migration is only supported for Cassandra KVS at the moment.
If using DBKVS or other key-value services, it remains the user&#8217;s responsibility to ensure that they have performed the migration detailed in <a class="reference internal" href="../services/timelock_service/migration.html#timelock-migration"><span class="std std-ref">Migration to External Timelock Services</span></a>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1569">Pull Request 1</a>,
<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1570">Pull Request 2</a>, and
<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1579">Pull Request 3</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Fixed multiple scenarios where DBKVS can run into deadlocks due to unnecessary connections.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1566">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-31-0">
<h2>v0.31.0<a class="headerlink" href="#v0-31-0" title="Permalink to this headline">¶</a></h2>
<p>8 Feb 2017</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span> <span class="changetype changetype-breaking">DEV BREAK</span></td>
<td>Improved Oracle performance on DBKVS by preventing excessive reads from the _namespace table when initializing SweepStrategyManager.
Replaced <code class="docutils literal"><span class="pre">mapToFullTableNames()</span></code> with <code class="docutils literal"><span class="pre">generateMapToFullTableNames()</span></code> in <code class="docutils literal"><span class="pre">com.palantir.atlasdb.keyvalue.TableMappingService</span></code>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1486">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-breaking">DEV BREAK</span></td>
<td>Removed the unused <code class="docutils literal"><span class="pre">TieredKeyValueService</span></code> which offered the ability to spread tables across multiple KVSs that exist in a stacked hierarchy (primary &amp; secondary).
If you require this KVS please file a ticket to have it reinstated.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1553">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-breaking">DEV BREAK</span></td>
<td><p class="first">Fast forwarding a persistent timestamp service to <code class="docutils literal"><span class="pre">Long.MIN_VALUE</span></code> will now throw an exception, whereas previously it would be a no-op.
Calling the <code class="docutils literal"><span class="pre">fast-forward</span></code> endpoint without specifying the fast-forward timestamp parameter will now default to submitting <code class="docutils literal"><span class="pre">Long.MIN_VALUE</span></code>, and thus return a HTTP 400 response.</p>
<p class="last">We are introducing this break to prevent accidental corruption by forgetting to submit the fast-forward timestamp.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1538">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Oracle queries now use the correct hints when generating the query plan.
This will improve performance for Oracle on DB KVS.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1549">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-breaking">USER BREAK</span></td>
<td><p class="first">Oracle table names can now have a maximum length of 27 characters instead of the previous limit of 30.
This is to ensure consistency in naming the primary key constraint which adds a prefix of <code class="docutils literal"><span class="pre">pk_</span></code> to the table name.
This will break any installation of Oracle with the <code class="docutils literal"><span class="pre">useTableMapping</span></code> flag set to <code class="docutils literal"><span class="pre">true</span></code>.</p>
<p class="last">Since Oracle support is still in beta, we are not providing an automatic migration path from older versions of AtlasDB.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1552">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Support for Oracle 12c batch responses.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1540">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-30-0">
<h2>v0.30.0<a class="headerlink" href="#v0-30-0" title="Permalink to this headline">¶</a></h2>
<p>27 Jan 2017</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span> <span class="changetype changetype-breaking">DEV BREAK</span></td>
<td><p class="first">Fixed schema generation with Java 8 optionals.
To use Java8 optionals, supply <code class="docutils literal"><span class="pre">OptionalType.JAVA8</span></code> as an additional constructor argument when creating your <code class="docutils literal"><span class="pre">Schema</span></code> object.</p>
<p class="last">Additionally, this fix requires all AtlasDB clients to regenerate their schema, even if they do not use the Java 8 optionals.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1501">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Prevent deadlocks in an edge case where we perform parallel reads with a small connection pool on DB KVS.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1468">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-new">NEW</span></td>
<td><p class="first">Added support for benchmarking custom Key Value Stores.
In the future this will enable performance regression testing for Oracle.</p>
<p class="last">See our <a class="reference internal" href="../performance/writing.html#performance-writing"><span class="std std-ref">performance writing</span></a> documentation for details.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1459">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td><p class="first">Don&#8217;t retry interrupted remote calls.</p>
<p class="last">This should have the effect of shutting down faster in situations where we receive a <code class="docutils literal"><span class="pre">InterruptedException</span></code>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1488">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Added request and exception rates metrics in CassandraClientPool. This will provide access to 1-, 5-, and 15-minute moving averages.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1497">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>More informative logging around retrying of transactions.
If a transaction succeeds after being retried, we log the success (at the INFO level).
If a transaction failed, but will be retried, we now also log the number of failures so far (at INFO).
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1376">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Updated our dependency on <code class="docutils literal"><span class="pre">gradle-java-distribution</span></code> from 1.2.0 to 1.3.0.
See gradle-java-distribution <a class="reference external" href="https://github.com/palantir/gradle-java-distribution/releases">release notes</a> for details.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1500">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-29-0">
<h2>v0.29.0<a class="headerlink" href="#v0-29-0" title="Permalink to this headline">¶</a></h2>
<p>17 Jan 2017</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-new">NEW</span></td>
<td>Returned <code class="docutils literal"><span class="pre">RemotingKeyValueService</span></code> and associated remoting classes to the AtlasDB code base.
These now live in <code class="docutils literal"><span class="pre">atlasdb-remoting</span></code>.
This KVS will pass remote calls to a local delegate KVS.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1304">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Stream store compression, introduced in 0.27.0, no longer creates a transaction inside a transaction when streaming directly to a file.
Additionally, a check was added to enforce the condition imposed in 0.28.0, namely that the caller of <code class="docutils literal"><span class="pre">AbstractGenericStreamStore.loadStream</span></code> should not call <code class="docutils literal"><span class="pre">InputStream.read()</span></code> within the transaction that was used to fetch the stream.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1460">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>AtlasDB timestamp and lock HTTPS communication now use JVM optimized cipher suite CBC over the slower GCM.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1378">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-new">NEW</span></td>
<td>Added a new <code class="docutils literal"><span class="pre">KeyValueService</span></code> API method, <code class="docutils literal"><span class="pre">checkAndSet</span></code>.
This is to be used in upcoming backup lock changes, and is not intended for other usage. If you think your application would benefit from using this directly, please contact the AtlasDB dev team.
This is supported for Cassandra, Postgres, and Oracle, but in the latter case support is only provided for tables which are not overflow tables.
<code class="docutils literal"><span class="pre">checkAndSet</span></code> is <strong>not</strong> supported for RocksDB or JDBC.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1435">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Reverted the <code class="docutils literal"><span class="pre">devbreak</span></code> in AtlasDB 0.28.0 by returning the <code class="docutils literal"><span class="pre">DebugLogger</span></code> to its original location.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1469">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-28-0">
<h2>v0.28.0<a class="headerlink" href="#v0-28-0" title="Permalink to this headline">¶</a></h2>
<p>13 Jan 2017</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-breaking">DEV BREAK</span></td>
<td>The <code class="docutils literal"><span class="pre">DebugLogger</span></code> class was moved from package <code class="docutils literal"><span class="pre">com.palantir.timestamp</span></code> in project <code class="docutils literal"><span class="pre">timestamp-impl</span></code> to <code class="docutils literal"><span class="pre">com.palantir.util</span></code> in project <code class="docutils literal"><span class="pre">atlasdb-commons</span></code>.
This break is reverted in the next release (AtlasDB 0.29.0) and will not affect services who skip this release.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1445">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Increase default Cassandra pool size from minimum of 20 and maximum of 5x the minimum (100 if minimum not modified) connections to minimum of 30 and maximum of 100 connections.
This has empirically shown better handling of bursts of requests that would otherwise require creating many new connections to Cassandra from the clients.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1402">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-new">NEW</span></td>
<td>Added metrics to SnapshotTransaction to monitor durations of various operations such as <code class="docutils literal"><span class="pre">get</span></code>, <code class="docutils literal"><span class="pre">getRows</span></code>, <code class="docutils literal"><span class="pre">commit</span></code>, etc.
AtlasDB users should use <code class="docutils literal"><span class="pre">AtlasDbMetrics.setMetricRegistry</span></code> to set a <code class="docutils literal"><span class="pre">MetricRegistry</span></code>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1429">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-new">NEW</span></td>
<td>Added metrics in Cassandra clients to record connection pool statistics and exception rates.
These metrics use the global <code class="docutils literal"><span class="pre">AtlasDbRegistry</span></code> metrics.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1380">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-new">NEW</span></td>
<td><p class="first">There is now a <code class="docutils literal"><span class="pre">TimestampMigrationService</span></code> with the <code class="docutils literal"><span class="pre">fast-forward</span></code> method that can be used to migrate between timestamp services.
You will simply need to fast-forward the new timestamp service using the latest timestamp from the old service.
This can be done using the <a class="reference internal" href="../cluster_management/clis.html#offline-clis"><span class="std std-ref">timestamp forward cli</span></a> when your AtlasDB services are offline.</p>
<p class="last">This capability was added so we can automate the migration to an external Timelock service in a future release.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1445">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Allow tables declared with <code class="docutils literal"><span class="pre">SweepStrategy.THOROUGH</span></code> to be migrated during a KVS migration.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1410">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Fix an issue with stream store where pre-loading the first block of an input stream caused us to create a transaction inside another transaction.
To avoid this issue, it is now the caller&#8217;s responsibility to ensure that <code class="docutils literal"><span class="pre">InputStream.read()</span></code> is not called within the transaction used to fetch the stream.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1447">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td><code class="docutils literal"><span class="pre">atlasdb-rocksdb</span></code> is no longer required by <code class="docutils literal"><span class="pre">atlasdb-cli</span></code> and therefore will no longer be packaged with AtlasDB clients pulling in <code class="docutils literal"><span class="pre">atlasdb-dropwizard-bundle</span></code>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1439">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>All SnapshotTransaction <code class="docutils literal"><span class="pre">get</span></code> methods are now safe for tables declared with SweepStrategy.THOROUGH.
Previously, a validation check was omitted for <code class="docutils literal"><span class="pre">getRowsColumnRange</span></code>, <code class="docutils literal"><span class="pre">getRowsIgnoringLocalWrites</span></code>, and <code class="docutils literal"><span class="pre">getIgnoringLocalWrites</span></code>, which in very rare cases could have resulted in deleted values being returned by a long-running read transaction.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1421">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-breaking">USER BREAK</span></td>
<td>Users must not create a client named <code class="docutils literal"><span class="pre">leader</span></code>. AtlasDB Timelock Server will fail to start if this is found.
Previously, using <code class="docutils literal"><span class="pre">leader</span></code> would have silently failed, since the JAXRS 3.7.2 algorithm does not include backtracking over
root resource classes (so either leader election or timestamp requests would have failed).
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1442">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-27-2">
<h2>v0.27.2<a class="headerlink" href="#v0-27-2" title="Permalink to this headline">¶</a></h2>
<p>10 Jan 2017</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Fixed an issue with <code class="docutils literal"><span class="pre">StreamStore.loadStream</span></code>&#8216;s underlying <code class="docutils literal"><span class="pre">BlockGetter</span></code> where, for non-default block size and in-memory thresholds,
we would incorrectly throw an exception instead of allowing the stream to be created.
This caused an issue when the in-memory threshold was many times larger than the default (47MB for the default block size),
or when the block size was many times smaller (7KB for the default in-memory threshold).
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1422">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-27-1">
<h2>v0.27.1<a class="headerlink" href="#v0-27-1" title="Permalink to this headline">¶</a></h2>
<p>6 Jan 2017</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Fixed an edge case in stream stores where we throw an exception for using the exact maximum number of bytes in memory.
This behavior was introduced in 0.27.0 and does not affect stream store usage pre-0.27.0.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1411">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Backoff when receiving a socket timeout to Cassandra to put back pressure on client and to spread out load incurred
on remaining servers when a failover occurs.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1420">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-27-0">
<h2>v0.27.0<a class="headerlink" href="#v0-27-0" title="Permalink to this headline">¶</a></h2>
<p>6 Jan 2017</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-new">NEW</span></td>
<td><p class="first">AtlasDB now supports stream store compression.
Streams can be compressed client-side by adding the <code class="docutils literal"><span class="pre">compressStreamInClient</span></code> option to the stream definition.
Reads from the stream store will transparently decompress the data.</p>
<p class="last">For information on using the stream store, see <a class="reference internal" href="../schemas/streams.html#schemas-streams"><span class="std std-ref">Streams</span></a>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1357">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td><code class="docutils literal"><span class="pre">StreamStore.loadStream</span></code> now actually streams data if it does not fit in memory.
This means that getting the first byte of the stream now has constant-time performance, rather than
linear in terms of stream length as it was previously.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1341">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Increased Cassandra connection pool idle timeout to 10 minutes, and reduced eviction check frequency to 20-30 seconds at 1/10 of connections.
This should reduce bursts of stress on idle Cassandra clusters.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1336">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-new">NEW</span></td>
<td><p class="first">There is a new configuration called <code class="docutils literal"><span class="pre">maxConnectionBurstSize</span></code>, which configures how large the pool is able to grow when receiving a large burst of requests.
Previously this was hard-coded to 5x the <code class="docutils literal"><span class="pre">poolSize</span></code> (which is now the default for the parameter).</p>
<p class="last">See <a class="reference internal" href="../configuration/key_value_service_configs/cassandra_key_value_service_config.html#cassandra-kvs-config"><span class="std std-ref">Cassandra KVS Config</span></a> for details on configuring AtlasDB with Cassandra.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1336">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Improved the performance of Oracle queries by making the table name cache global to the KVS level.
Keeping the mapping in a cache saves one DB lookup per query, when the table has already been used.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1325">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Oracle value style caching limited in scope to per-KVS, previously per-JVM, which could have in extremely rare cases caused issues for users in non-standard configurations.
This would have caused issues for users doing a KVS migration to move from one Oracle DB to another.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1325">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-new">NEW</span></td>
<td>We now publish a runnable distribution of AtlasCli that is available for download directly from <a class="reference external" href="https://bintray.com/palantir/releases/atlasdb#files/com/palantir/atlasdb/atlasdb-cli-distribution">Bintray</a>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1318">Pull Request 1</a>) and
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1345">Pull Request 2</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Enabled garbage collection logging for CircleCI builds.
This may be useful for investigating pre-merge build failures.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1398">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Updated our dependency on <code class="docutils literal"><span class="pre">gradle-java-distribution</span></code> from 1.0.1 to 1.2.0.
See gradle-java-distribution <a class="reference external" href="https://github.com/palantir/gradle-java-distribution/releases">release notes</a> for details.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1361">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-new">NEW</span></td>
<td>Add KeyValueStore.deleteRange(); makes large swathes of row deletions faster,
like transaction sweeping. Also can be used as a fallback option for people
having issues with their backup solutions not allowing truncate() during a backup
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1391">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-26-0">
<h2>v0.26.0<a class="headerlink" href="#v0-26-0" title="Permalink to this headline">¶</a></h2>
<p>5 Dec 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Added Javadocs to <code class="docutils literal"><span class="pre">CassandraKeyValueService.java</span></code>, <a class="reference external" href="http://palantir.github.io/atlasdb/html/configuration/multinode_cassandra.html">documented</a> the behaviour of <code class="docutils literal"><span class="pre">CassandraKeyValueService</span></code> when one or more nodes in the Cassandra cluster are down.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1329">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td><p class="first">Substantially improved performance of the DBKVS implementation of the single-iterator version of getRowsColumnRange.
Two new performance benchmarks were added as part of this PR:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">KvsGetRowsColumnRangeBenchmarks.getAllColumnsAligned</span></code></li>
<li><code class="docutils literal"><span class="pre">KvsGetRowsColumnRangeBenchmarks.getAllColumnsUnaligned</span></code></li>
</ul>
</div></blockquote>
<p class="last">These benchmarks show a 2x improvement on Postgres, and an AtlasDB client has observed an order of magnitude improvement experimentally.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1132">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>OkHttpClient connection pool configured to have 100 idle connections with 10 minute keep-alive, reducing the number of connections that need to be created when a large number of transactions begin.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1294">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Commit timestamp lookups are now cached across transactions.
This provided a near 2x improvement in our performance benchmark testing.
See comments on the pull request for details.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1238">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td><code class="docutils literal"><span class="pre">LockAwareTransactionManager.runTaskWithLocksWithRetry</span></code> now fails faster if given lock tokens that time out in a way that cannot be recovered from.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1322">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>When we hit the <code class="docutils literal"><span class="pre">MultipleRunningTimestampServicesError</span></code> issue, we now automatically log thread dumps to a separate file (file path specified in service logs).
The full file path of the <code class="docutils literal"><span class="pre">atlas-timestamps-log</span></code> file will be outputted to the service logs.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1275">Pull Request 1</a>, <a class="reference external" href="https://github.com/palantir/atlasdb/pull/1332">Pull Request 2</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-25-0">
<h2>v0.25.0<a class="headerlink" href="#v0-25-0" title="Permalink to this headline">¶</a></h2>
<p>25 Nov 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td><code class="docutils literal"><span class="pre">--config-root</span></code> and other global parameters can now be passed into dropwizard CLIs.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1268">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-breaking">USER BREAK</span></td>
<td>The migration <code class="docutils literal"><span class="pre">--config-root</span></code> shorthand (<code class="docutils literal"><span class="pre">-r</span></code>) can no longer be used as it conflicted with the timestamp command <code class="docutils literal"><span class="pre">--row</span></code>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1268">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-new">NEW</span></td>
<td>Dbkvs: ConnectionSupplier consumers can now choose to receive a brand new unshared connection.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1258">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-new">NEW</span></td>
<td>AtlasDB now supports Cassandra 3.7 as well as Cassandra 2.2.8.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1206">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Oracle perf improvement; table names now cached, resulting in fewer round trips to the database.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1215">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td><code class="docutils literal"><span class="pre">SweepStatsKeyValueService</span></code> will no longer flush a final batch of statistics during shutdown. This avoids
potentially long pauses that could previously occur when closing a <code class="docutils literal"><span class="pre">Cleaner</span></code>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1232">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Better support for AtlasDB clients running behind load balancers. In particular, if an AtlasDB client falls down and
its load balancer responds with &#8220;503: Service Unavailable&#8221;, the request will be attempted on other clients rather than aborting.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1175">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Oracle will not drop a table that already exists on  <code class="docutils literal"><span class="pre">createTable</span></code> calls when multiple AtlasDB clients make the call to create the same table.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1243">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Certain Oracle KVS calls no longer attempt to leak connections created internally.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1215">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>OracleKVS: <code class="docutils literal"><span class="pre">TableSizeCache</span></code> now invalidates the cache on table delete.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1272">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-breaking">DEV BREAK</span></td>
<td>Our Jackson version has been updated from 2.5.1 to 2.6.7 and Dropwizard version from 0.8.2 to 0.9.3.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1209">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Additional debugging available for those receiving &#8216;name must be no longer than 1500 bytes&#8217; errors.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1117">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-breaking">DEV BREAK</span></td>
<td><code class="docutils literal"><span class="pre">Cell.validateNameValid</span></code> is now private; consider <code class="docutils literal"><span class="pre">Cell.isNameValid</span></code> instead.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1117">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-24-0">
<h2>v0.24.0<a class="headerlink" href="#v0-24-0" title="Permalink to this headline">¶</a></h2>
<p>15 Nov 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-breaking">USER BREAK</span></td>
<td><p class="first">All Oracle table names will be truncated and be of the form: <code class="docutils literal"><span class="pre">&lt;prefix&gt;_&lt;2-letter-namespace&gt;__&lt;table-name&gt;_&lt;5-digit-int&gt;</span></code>.
Previously we only truncated names that exceeded the character limit for Oracle table names.
This should improve legibility as all table names for a particular application will have identical formatting.</p>
<p class="last">Oracle is in beta, and thus we have not built a migration path from old table names to new table names.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1187">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>The fetch timestamp CLI correctly handles <code class="docutils literal"><span class="pre">--file</span></code> inputs containing non-existent directories by creating any missing intermediate directories.
Previously, the CLI would throw an exception and fail in such cases.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1151">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>When using DBKVS with Oracle, <code class="docutils literal"><span class="pre">TableRemappingKeyValueService</span></code> does not throw a RuntimeException when performing <code class="docutils literal"><span class="pre">getMetaData</span></code> and <code class="docutils literal"><span class="pre">dropTable</span></code> operations on a non-existent table.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1186">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>The KVS migration CLI will now decrypt encrypted values in your KVS configuration.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1171">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td><p class="first">If using the Dropwizard command to run a KVS migration, the Dropwizard config will be used as the <code class="docutils literal"><span class="pre">--migrateConfig</span></code> config if none is specified.
Running the KVS migration command as a deployable CLI still requires <code class="docutils literal"><span class="pre">--migrateConfig</span></code>.</p>
<p class="last">See the <a class="reference internal" href="../cluster_management/clis.html#clis-migrate"><span class="std std-ref">documentation</span></a> for details on how to use the KVS migration command.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1171">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>The timestamp bound store now works with Oracle as a relational backing store.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1224">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>CLIs now output to standard out, standard error, and the service logs, rather than only printing to the service logs.
This should greatly improve usability for service admins using the CLIs.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1177">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Remove usage of <code class="docutils literal"><span class="pre">createUnsafe</span></code> in generated Schema code. You can regenerate your schema to get rid of the deprecation warnings.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1194">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td><code class="docutils literal"><span class="pre">atlasdb-cassandra</span></code> now depends on <code class="docutils literal"><span class="pre">cassandra-thrift</span></code> instead of <code class="docutils literal"><span class="pre">cassandra-all</span></code>.
Applications that support <a class="reference internal" href="../configuration/key_value_service_configs/cassandra_key_value_service_config.html#cassandra-configuration"><span class="std std-ref">CassandraKVS</span></a> will see a 20MB (10%) decrease in their Cassandra dependency footprint.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1222">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-new">NEW</span></td>
<td>Add support for generating schemas with Java8 Optionals instead of Guava Optionals.
To use Java8 optionals, supply <code class="docutils literal"><span class="pre">OptionalType.JAVA8</span></code> as an additional constructor argument when creating your <code class="docutils literal"><span class="pre">Schema</span></code> object.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1162">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-23-0">
<h2>v0.23.0<a class="headerlink" href="#v0-23-0" title="Permalink to this headline">¶</a></h2>
<p>8 Nov 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-breaking">DEV BREAK</span></td>
<td>All KVSs now as a guarantee throw a RuntimeException on attempts to truncate a non-existing table, so services should check the existence of a table before attempting to truncate.
Previously we would only throw exceptions for the Cassandra KVS.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1114">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>The KVS <a class="reference internal" href="../cluster_management/clis.html#clis-migrate"><span class="std std-ref">migration</span></a> command now supports the <code class="docutils literal"><span class="pre">--offline</span></code> flag and can be run as an offline CLI.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1149">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-deprecated">DEPRECATED</span></td>
<td><p class="first"><code class="docutils literal"><span class="pre">TableReference.createUnsafe</span></code> is now deprecated to prevent mishandling of table names.
<code class="docutils literal"><span class="pre">createWithEmptyNamespace</span></code> or <code class="docutils literal"><span class="pre">createFromFullyQualifiedName</span></code> should be used instead.</p>
<p class="last">Schema generated code still contains use of <code class="docutils literal"><span class="pre">TableReference.createUnsafe</span></code> and is being tracked for removal on <a class="reference external" href="https://github.com/palantir/atlasdb/issues/1172">#1172</a>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1121">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-new">NEW</span></td>
<td><p class="first">We now provide Oracle support (beta) for all valid schemas.
Oracle table names exceeding 30 characters are now mapped to shorter names by truncating and appending a sequence number.
Support for Oracle is currently in beta and services wishing to deploy against Oracle should contact the AtlasDB team.</p>
<p class="last">See <a class="reference internal" href="../schemas/oracle_table_mapping.html#oracle-table-mapping"><span class="std std-ref">Oracle Table Mapping</span></a> for details on how table names are mapped.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1076">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-changed">CHANGED</span></td>
<td>We now test against Cassandra 2.2.8, rather than Cassandra 2.2.7.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1112">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Added a significant amount of logging aimed at tracking down the <code class="docutils literal"><span class="pre">MultipleRunningTimestampServicesError</span></code>.
If clients are hitting this error, then they should add TRACE logging for <code class="docutils literal"><span class="pre">com.palantir.timestamp</span></code>.
These logs can also be directed to a separate file, see the <a class="reference internal" href="../configuration/logging.html#logging-configuration"><span class="std std-ref">documentation</span></a> for more details.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1098">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Retrying a Cassandra operation now retries against distinct hosts.
Previously, this would independently select hosts randomly, meaning that we might unintentionally try the same operation on the same servers.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1139">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>AtlasDB clients can start when a single Cassandra node is unreachable.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1045">Pull Request</a>).</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Removed spurious error logging during first-time startup against a brand new Cassandra cluster.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1033">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Improved the reliability of starting up against a degraded Cassandra cluster.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1033">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>No longer publish a spurious junit dependency in atlasdb-client compile.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1176">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-22-0">
<h2>v0.22.0<a class="headerlink" href="#v0-22-0" title="Permalink to this headline">¶</a></h2>
<p>28 Oct 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td><p class="first">The <code class="docutils literal"><span class="pre">clean-cass-locks-state</span></code> CLI clears the schema mutation lock by setting it to a special &#8220;cleared&#8221; value in the same way that normal lockholders clear the lock.
Previously the CLI would would drop the whole <code class="docutils literal"><span class="pre">_locks</span></code> table to clear the schema mutation lock.</p>
<p class="last">See <a class="reference internal" href="../schemas/migrating_schemas.html#schema-mutation-lock"><span class="std std-ref">Schema Mutation Lock (Cassandra only)</span></a> for details on how the schema mutation lock works.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1056">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Fixed an issue where some locks were not being tracked for continuous refreshing due to one of the lock methods not being overridden by the <code class="docutils literal"><span class="pre">LockRefreshingLockService</span></code>.
This resulted in locks that appeared to be refreshed properly, but then would mysteriously time out at the end of a long-running operation.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1134">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td><p class="first">Sweep no longer immediately falls back to a <code class="docutils literal"><span class="pre">sweepBatchSize</span></code> of 1 after receiving an error.</p>
<p class="last">See <a class="reference internal" href="../cluster_management/sweep.html#sweep-tunable-parameters"><span class="std std-ref">sweep tuning</span></a> documentation for more information on sweep tuning parameters.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1093">Pull Request</a>)</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-21-1">
<h2>v0.21.1<a class="headerlink" href="#v0-21-1" title="Permalink to this headline">¶</a></h2>
<p>24 Oct 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td><p class="first">Fixed a regression with Cassandra KVS where you could no longer create a table if it has the same name as another table in a different namespace.</p>
<p>To illustrate the issue, assume you have namespace <code class="docutils literal"><span class="pre">namespace1</span></code> and the table <code class="docutils literal"><span class="pre">table1</span></code>, and you would like to add a column to <code class="docutils literal"><span class="pre">table1</span></code> and <cite>version</cite> the table by using the new namespace <code class="docutils literal"><span class="pre">namespace2</span></code>.
On disk you already have the Cassandra table <code class="docutils literal"><span class="pre">namespace1__table1</span></code>, and now you are trying to create <code class="docutils literal"><span class="pre">namespace2__table1</span></code>.
Creating <code class="docutils literal"><span class="pre">namespace2__table1</span></code> would fail because Cassandra KVS believes that the table already exists.
This is relevant if you use multiple namespaces when performing schema migrations.</p>
<p class="last">Note that namespace is an application level abstraction defined as part of a AtlasDB schema and is not the same as Cassandra keyspace.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1110">Pull Request</a>)</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-21-0">
<h2>v0.21.0<a class="headerlink" href="#v0-21-0" title="Permalink to this headline">¶</a></h2>
<p>21 Oct 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-new">NEW</span></td>
<td>Sweep now supports batching on a per-cell level via the <code class="docutils literal"><span class="pre">sweepCellBatchSize</span></code> parameter in your AtlasDB config.
This can decrease Sweep memory consumption on the client side if your tables have large cells or many columns (i.e. wide rows).
For information on how to configure Sweep batching, see the <a class="reference internal" href="../cluster_management/sweep/sweep-cli.html#atlasdb-sweep-cli"><span class="std std-ref">sweep documentation</span></a>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1068">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>If <code class="docutils literal"><span class="pre">hashFirstRowComponent()</span></code> is used in a table or index definition, we no longer throw <code class="docutils literal"><span class="pre">IllegalStateException</span></code> when generating schema code.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1091">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-20-0">
<h2>v0.20.0<a class="headerlink" href="#v0-20-0" title="Permalink to this headline">¶</a></h2>
<p>19 Oct 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-breaking">DEV BREAK</span></td>
<td><p class="first">Hotspotting warnings, previously logged at ERROR, will now throw <code class="docutils literal"><span class="pre">IllegalStateException</span></code> when generating your schema code.
Products who hit this warning will need to add <code class="docutils literal"><span class="pre">ignoreHotspottingChecks()</span></code> to the relevant tables of their schema, or modify their schemas such that the first row component is not a VAR_STRING, a VAR_LONG, a VAR_SIGNED_LONG, or a SIZED_BLOB.</p>
<p class="last">See documentation on <a class="reference internal" href="../schemas/overview.html#primitive-valuetypes"><span class="std std-ref">primitive value types</span></a> and <a class="reference internal" href="../schemas/tables_and_indices.html#tables-and-indices-partitioners"><span class="std std-ref">partitioners</span></a> for information on how to address your schemas.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/947">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td><p class="first">The AtlasDB Console included in the Dropwizard bundle can startup in an &#8220;online&#8221; mode, i.e. it can connect to a running cluster.</p>
<p class="last">See <a class="reference internal" href="../cluster_management/console.html#console"><span class="std std-ref">AtlasDB Console</span></a> for information on how to use AtlasDB console.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1063">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>The <code class="docutils literal"><span class="pre">atlasdb-dagger</span></code> project now publishes a shadowed version so we do not rely on the version of dagger on the classpath.
This fixes the issue where running the CLIs would cause a <code class="docutils literal"><span class="pre">ClassNotFoundException</span></code> if your application also makes use of dagger.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1065">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-new">NEW</span></td>
<td><p class="first">Oracle is supported via DBKVS if you have runtime dependency on an Oracle driver that resolves the JsonType &#8220;jdbcHandler&#8221;.
Due to an Oracle limitation, all table names in the schema must be less than 30 characters long.</p>
<p class="last">See <a class="reference internal" href="../configuration/key_value_service_configs/oracle_key_value_service_config.html#oracle-configuration"><span class="std std-ref">Oracle KVS Configuration</span></a> for details on how to configure your service to use Oracle.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/985">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>The DBKVS config now enforces that the namespace must always be empty for <code class="docutils literal"><span class="pre">metadataTable</span></code> in the <code class="docutils literal"><span class="pre">ddl</span></code> block.
The <code class="docutils literal"><span class="pre">metadataTable</span></code> parameter defaults to an empty name space, and if this was configured to be anything else previously, DBKVS would not start.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/985">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>We have changed the default <code class="docutils literal"><span class="pre">tablePrefix</span></code> for <code class="docutils literal"><span class="pre">OracleDdlConfig</span></code> to be <code class="docutils literal"><span class="pre">a_</span></code>.
Previously this would default to be empty and so user-defined tables could have a leading underscore, which is an invalid table name for Oracle.
This change is specific to Oracle and does not affect DBKVS on Postgres.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/985">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>The <code class="docutils literal"><span class="pre">metadataTableName</span></code> for Oracle is now <code class="docutils literal"><span class="pre">atlasdb_metadata</span></code> instead of <code class="docutils literal"><span class="pre">_metadata</span></code>.
This is due to Oracle&#8217;s restriction of not allowing table names with a leading underscore.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/985">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-19-0">
<h2>v0.19.0<a class="headerlink" href="#v0-19-0" title="Permalink to this headline">¶</a></h2>
<p>11 Oct 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-breaking">DEV BREAK</span></td>
<td>Removed KeyValueService <code class="docutils literal"><span class="pre">initializeFromFreshInstance</span></code>, <code class="docutils literal"><span class="pre">tearDown</span></code>, and <code class="docutils literal"><span class="pre">getRangeWithHistory</span></code>.
It is likely all callers of tearDown just want to call close, and getRangeWithHistory has been replaced with <code class="docutils literal"><span class="pre">getRangeOfTimestamps</span></code>.
Also removed Partitioning and Remoting KVSs, which were unused and had many unimplemented methods.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1041">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>In Cassandra KVS, we now no longer take out the schema mutation lock in calls to <code class="docutils literal"><span class="pre">createTables</span></code> if tables already exist.
This fixes the issue that prevented the <code class="docutils literal"><span class="pre">clean-cass-locks-state</span></code> CLI from running correctly.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/991">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Added a wait period before declaring someone dead based on lack of heartbeat.
This will ensure we handle delayed heartbeats in high load situations (eg. on circleci).
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1035">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-breaking">DEV BREAK</span></td>
<td><dl class="first docutils">
<dt>Removed the following classes and interfaces that appeared to be unused:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">AbstractStringCollector</span></code></li>
<li><code class="docutils literal"><span class="pre">BatchRowVisitor</span></code></li>
<li><code class="docutils literal"><span class="pre">ChunkedRowVisitor</span></code></li>
<li><code class="docutils literal"><span class="pre">CloseShieldedKeyValueService</span></code></li>
<li><code class="docutils literal"><span class="pre">DBMgrConfigurationException</span></code></li>
<li><code class="docutils literal"><span class="pre">IdGenerator</span></code></li>
<li><code class="docutils literal"><span class="pre">ManyHostPoolingContainer</span></code></li>
<li><code class="docutils literal"><span class="pre">MapCollector</span></code></li>
<li><code class="docutils literal"><span class="pre">PalantirSequenceEnabledSqlConnection</span></code></li>
<li><code class="docutils literal"><span class="pre">PalantirSqlConnectionRunner</span></code></li>
<li><code class="docutils literal"><span class="pre">PaxosLearnerPersistence</span></code></li>
<li><code class="docutils literal"><span class="pre">PaxosPingablePersistence</span></code></li>
<li><code class="docutils literal"><span class="pre">PaxosProtos</span></code></li>
<li><code class="docutils literal"><span class="pre">PostgresBlobs</span></code></li>
<li><code class="docutils literal"><span class="pre">RowWrapper</span></code></li>
<li><code class="docutils literal"><span class="pre">SqlConnectionImpl</span></code></li>
<li><code class="docutils literal"><span class="pre">SqlStackLogWrapper</span></code></li>
<li><code class="docutils literal"><span class="pre">StringCollector</span></code></li>
<li><code class="docutils literal"><span class="pre">TLongQueue</span></code></li>
</ul>
</dd>
</dl>
<p class="last">Please reach out to us if you are adversely affected by these removals.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1027">Pull Request 1</a> and <a class="reference external" href="https://github.com/palantir/atlasdb/pull/1027">Pull Request 2</a>)</p>
</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-changed">CHANGED</span></td>
<td>The SQL connection manager will no longer temporarily increase the pool size by <a class="reference external" href="https://github.com/palantir/atlasdb/pull/971/files#diff-f0027e21eb0fc2a30cf8b011cc0a1adbL358">eleven</a> connections when the pool is exhausted.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/971">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-18-0">
<h2>v0.18.0<a class="headerlink" href="#v0-18-0" title="Permalink to this headline">¶</a></h2>
<p>3 Oct 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Fixed a bug introduced in 0.17.0, where products upgraded to 0.17.0 would see a &#8220;dead heartbeat&#8221; error on first start-up, requiring users to manually truncate the <code class="docutils literal"><span class="pre">_locks</span></code> table.
Upgrading to AtlasDB 0.18.0 from any previous version will work correctly without requiring manual intervention.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1016">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Dropping a table and then creating it again no longer adds an additional row to the <code class="docutils literal"><span class="pre">_metadata</span></code> table.
Historical versions of the metadata entry before the most recent one are <strong>not</strong> deleted, so if you routinely drop and recreate the same table, you might consider <a class="reference internal" href="../cluster_management/sweep.html#sweep"><span class="std std-ref">sweeping</span></a> the <code class="docutils literal"><span class="pre">_metadata</span></code> table.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/946">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Users of DBKVS can now set arbitrary connection parameters.
This is useful if, for example, you wish to boost performance by adjusting the default batch size for fetching rows from the underlying database.
See the <a class="reference internal" href="../configuration/key_value_service_configs/postgres_key_value_service_config.html#postgres-configuration"><span class="std std-ref">documentation</span></a> for how to set these parameters, and <a class="reference external" href="https://jdbc.postgresql.org/documentation/head/connect.html">the JDBC docs</a> for a full list.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/1001">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-17-0">
<h2>v0.17.0<a class="headerlink" href="#v0-17-0" title="Permalink to this headline">¶</a></h2>
<p>28 Sept 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>The schema mutation lock holder now writes a &#8220;heartbeat&#8221; to the database to indicate that it is still responsive.
Other processes that are waiting for the schema mutation lock will now be able to see this heartbeat, infer that the lock holder is still working, and wait for longer.
This should reduce the need to manually truncate the locks table.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/934">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-new">NEW</span></td>
<td><code class="docutils literal"><span class="pre">hashFirstRowComponent</span></code> can now be used on index definitions to prevent hotspotting when creating schemas.
For more information on using <code class="docutils literal"><span class="pre">hashFirstRowComponent</span></code>, see the <a class="reference internal" href="../schemas/tables_and_indices.html#tables-and-indices-partitioners"><span class="std std-ref">Partitioners</span></a> documentation.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/986">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-16-0">
<h2>v0.16.0<a class="headerlink" href="#v0-16-0" title="Permalink to this headline">¶</a></h2>
<p>26 Sept 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-breaking">DEV BREAK</span></td>
<td>Removed <code class="docutils literal"><span class="pre">TransactionManager</span></code> implementations <code class="docutils literal"><span class="pre">ShellAwareReadOnlyTransactionManager</span></code> and <code class="docutils literal"><span class="pre">AtlasDbBackendDebugTransactionManager</span></code>.
These are no longer supported by AtlasDB and products are not expected to use them.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/939">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td><code class="docutils literal"><span class="pre">TransactionMangers.create()</span></code> now accepts <code class="docutils literal"><span class="pre">LockServerOptions</span></code> which can be used to apply configurations to the embedded LockServer instance running in the product.
The other <code class="docutils literal"><span class="pre">create()</span></code> methods will continue to use <code class="docutils literal"><span class="pre">LockServerOptions.DEFAULT</span></code>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/984">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td><a class="reference internal" href="../configuration/key_value_service_configs/cassandra_key_value_service_config.html#cassandra-sweep-config"><span class="std std-ref">Column paging Sweep</span></a> (in beta) correctly handles cases where table names have both upper and lowercase characters and cases where sweep is run multiple times on the same table.
If you are using the regular implementation of Sweep (i.e. you do not specify <code class="docutils literal"><span class="pre">timestampsGetterBatchSize</span></code> in your AtlasDB config), then you are not affected.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/951">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-15-0">
<h2>v0.15.0<a class="headerlink" href="#v0-15-0" title="Permalink to this headline">¶</a></h2>
<p>14 Sept 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td><p class="first">We have removed references to temp tables and no longer attempt to drop temp tables when aborting transactions.</p>
<p class="last">Temp tables are not currently being used by any KVSs, yet we were still calling <code class="docutils literal"><span class="pre">dropTempTables()</span></code> when we abort transactions.
Since dropping tables is a schema mutation, this has the side effect of increasing the likelihood that we lose the schema mutation lock when there are many concurrent transactions.
Removing temp tables entirely should reduce the need to manually truncate the locks table.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/916">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-breaking">DEV BREAK</span></td>
<td><p class="first">All TransactionManagers are now AutoCloseable and implement a close method that will free up the underlying resources.</p>
<p class="last">If your service implements a <code class="docutils literal"><span class="pre">TransactionManager</span></code> and does not extend <code class="docutils literal"><span class="pre">AbstractTransactionManager</span></code>, you now have to add a close method to the implementation.
No operations can be performed using the TransactionManager once it is closed.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/907">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-new">NEW</span></td>
<td><p class="first"><a class="reference internal" href="../schemas/physical_cleanup.html#physical-cleanup-sweep"><span class="std std-ref">AtlasDB Sweep</span></a> now uses <a class="reference internal" href="../configuration/key_value_service_configs/cassandra_key_value_service_config.html#cassandra-sweep-config"><span class="std std-ref">column paging</span></a> via the <code class="docutils literal"><span class="pre">timestampsGetterBatchSize</span></code> parameter to better handle sweeping cells with many historical versions.</p>
<p class="last">By paging over historical versions of cells during sweeping, we can avoid out of memory exceptions in Cassandra when we have particularly large cells or many historical versions of cells.
This feature is only implemented for Cassandra KVS and is disabled by default; please reach out to the AtlasDB dev team if you would like to enable it.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/834">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-new">NEW</span></td>
<td><p class="first">Added a second implementation of <code class="docutils literal"><span class="pre">getRowsColumnRange</span></code> method which allows you to page through dynamic columns in a single iterator.
This is expected to perform better than the previous <code class="docutils literal"><span class="pre">getRowsColumnRange</span></code>, which allows you to page through columns per row with certain KVS stores (e.g. DB KVS).
The new method should be preferred unless it is necessary to page through the results for different rows separately.</p>
<p class="last">Products or clients using wide rows should consider using <code class="docutils literal"><span class="pre">getRowsColumnRange</span></code> instead of <code class="docutils literal"><span class="pre">getRows</span></code> in <code class="docutils literal"><span class="pre">KeyValueService</span></code>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/724">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-new">NEW</span></td>
<td><p class="first">Added an <a class="reference internal" href="../cluster_management/clis.html#offline-clis"><span class="std std-ref">offline CLI</span></a> called <code class="docutils literal"><span class="pre">clean-cass-locks-state</span></code> to truncate the locks table when the schema mutation lock has been lost.</p>
<p class="last">This is useful on Cassandra KVS if an AtlasDB client goes down during a schema mutation and does not release the schema mutation lock, preventing other clients from continuing.
Previously an error message would direct users to manually truncate this table with CQL, but now this error message references the CLI.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/888">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-changed">CHANGED</span></td>
<td>Reverted our Dagger dependency from 2.4 to 2.0.2 and shadowed it so that it won&#8217;t conflict with internal products.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/926">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-14-0">
<h2>v0.14.0<a class="headerlink" href="#v0-14-0" title="Permalink to this headline">¶</a></h2>
<p>8 Sept 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-breaking">USER BREAK</span></td>
<td><p class="first"><code class="docutils literal"><span class="pre">TransactionManagers.create()</span></code> no longer takes in an argument of <code class="docutils literal"><span class="pre">Optional&lt;SSLSocketFactory&gt;</span> <span class="pre">sslSocketFactory</span></code>.
Instead, security settings between AtlasDB clients are now specified directly in configuration via the new optional parameter <code class="docutils literal"><span class="pre">sslConfiguration</span></code> located in the <code class="docutils literal"><span class="pre">leader</span></code>, <code class="docutils literal"><span class="pre">timestamp</span></code>, and <code class="docutils literal"><span class="pre">lock</span></code> blocks.
Details can be found in the <a class="reference internal" href="../configuration/leader_config.html#leader-config"><span class="std std-ref">Leader Configuration</span></a> documentation.</p>
<p class="last">To assist with back compatibility, we have introduced a helper method <code class="docutils literal"><span class="pre">AtlasDbConfigs.addFallbackSslConfigurationToAtlasDbConfig</span></code>, which will add the provided <code class="docutils literal"><span class="pre">sslConfiguration</span></code> to <code class="docutils literal"><span class="pre">config</span></code> if the SSL configuration is not specified directly in the <code class="docutils literal"><span class="pre">leader</span></code>, <code class="docutils literal"><span class="pre">timestamp</span></code>, or <code class="docutils literal"><span class="pre">lock</span></code> blocks.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/873">Pull Request 1</a> and <a class="reference external" href="https://github.com/palantir/atlasdb/pull/906">Pull Request 2</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>AtlasDB could startup with a leader configuration that is nonsensical, such as specifying both a <code class="docutils literal"><span class="pre">leader</span></code> block as well as a remote <code class="docutils literal"><span class="pre">timestamp</span></code> and <code class="docutils literal"><span class="pre">lock</span></code> blocks.
AtlasDB will now fail to start if your configuration is invalid with a sensible message, per <a class="reference external" href="https://github.com/palantir/atlasdb/issues/790">#790</a>, rather than potentially breaking in unexpected ways.
Please refer to <a class="reference internal" href="../configuration/leader_config.html#leader-config-examples"><span class="std std-ref">Example Leader Configurations</span></a> for guidance on valid configurations.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/854">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Fixed and standardized serialization and deserialization of AtlasDBConfig.
This prevented CLIs deployed via the <a class="reference internal" href="../cluster_management/dropwizard-bundle.html#dropwizard-bundle"><span class="std std-ref">Dropwizard bundle</span></a> from loading configuration properly.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/875">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-breaking">DEV BREAK</span></td>
<td>Updated our Dagger dependency from 2.0.2 to 2.4, so that our generated code matches with that of internal products.
This also bumps our Guava dependency from 18.0 to 19.0 to accommodate a Dagger compile dependency.
We plan on shading Dagger in the next release of AtlasDB, but products can force a Guava 18.0 runtime dependency to workaround the issue in the meantime.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/878">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-13-0">
<h2>v0.13.0<a class="headerlink" href="#v0-13-0" title="Permalink to this headline">¶</a></h2>
<p>30 Aug 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-breaking">DEV BREAK</span></td>
<td><code class="docutils literal"><span class="pre">AtlasDbServer</span></code> has been renamed to <code class="docutils literal"><span class="pre">AtlasDbServiceServer</span></code>.
Any products that are using this should switch to using the standard AtlasDB java API instead.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/801">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>The method <code class="docutils literal"><span class="pre">updateManyUnregisteredQuery(String</span> <span class="pre">sql)</span></code> has been removed from the <code class="docutils literal"><span class="pre">SqlConnection</span></code> interface, as it was broken, unused, and unnecessary.
Use <code class="docutils literal"><span class="pre">updateManyUnregisteredQuery(String</span> <span class="pre">sql,</span> <span class="pre">Iterable&lt;Object[]</span> <span class="pre">list&gt;)</span></code> instead.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/796">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Improved logging for schema mutation lock timeouts and added logging for obtaining and releasing locks.
Removed the advice to restart the client, as it will not help in this scenario.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/805">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Connections to Cassandra can be established over arbitrary ports.
Previously AtlasDB clients would assume the default Cassandra port of 9160 despite what is specified in the <a class="reference internal" href="../configuration/key_value_service_configs/cassandra_key_value_service_config.html#cassandra-kvs-config"><span class="std std-ref">Cassandra keyValueService configuration</span></a>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/771">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Fixed an issue when starting an AtlasDB client using the Cassandra KVS where we always grab the schema mutation lock, even if we are not making schema mutations.
This reduces the likelihood of clients losing the schema mutation lock and having to manually truncate the _locks table.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/771">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Performance and reliability enhancements to the in-beta CQL KVS.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/771">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-12-0">
<h2>v0.12.0<a class="headerlink" href="#v0-12-0" title="Permalink to this headline">¶</a></h2>
<p>22 Aug 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-breaking">USER BREAK</span></td>
<td>AtlasDB will always try to register timestamp and lock endpoints for your application, whereas previously this only occurred if you specify a <a class="reference internal" href="../configuration/leader_config.html#leader-config"><span class="std std-ref">Leader Configuration</span></a>.
This ensures that CLIs will be able to run against your service even in the single node case.
For Dropwizard applications, this is only a breaking change if you try to initialize your KeyValueService after having initialized the Dropwizard application.
Note: If you are initializing the KVS post-Dropwizard initialization, then your application will already fail when starting multiple AtlasDB clients.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/708">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-new">NEW</span></td>
<td>There is now a Dropwizard bundle which can be added to Dropwizard applications.
This will add startup commands to launch the AtlasDB console and <a class="reference internal" href="../cluster_management/clis.html#clis"><span class="std std-ref">CLIs</span></a> suchs as <code class="docutils literal"><span class="pre">sweep</span></code> and <code class="docutils literal"><span class="pre">timestamp</span></code>, which is needed to perform <a class="reference internal" href="../cluster_management/backup-restore.html#backup-restore"><span class="std std-ref">live backups</span></a>.
These commands will only work if the server is started with a leader block in its configuration.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/629">Pull Request 1</a> and <a class="reference external" href="https://github.com/palantir/atlasdb/pull/696">Pull Request 2</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>DB passwords are no longer output as part of the connection configuration <code class="docutils literal"><span class="pre">toString()</span></code> methods.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/755">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-new">NEW</span></td>
<td>All KVSs now come wrapped with ProfilingKeyValueService, which at the TRACE level provides timing information per KVS operation performed by AtlasDB.
See <a class="reference internal" href="../configuration/logging.html#logging-configuration"><span class="std std-ref">Logging Configuration</span></a> for more details.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/798">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-11-4">
<h2>v0.11.4<a class="headerlink" href="#v0-11-4" title="Permalink to this headline">¶</a></h2>
<p>29 Jul 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Correctly checks the Cassandra client version that determines if Cassandra supports Check And Set operations.
This is a critical bug fix that ensures we actually use our implementation from <a class="reference external" href="https://github.com/palantir/atlasdb/pull/436">#436</a>, which prevents data loss due to the Cassandra concurrent table creation bug described in <a class="reference external" href="https://github.com/palantir/atlasdb/issues/431">#431</a>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/751">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-11-2">
<h2>v0.11.2<a class="headerlink" href="#v0-11-2" title="Permalink to this headline">¶</a></h2>
<p>29 Jul 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-breaking">USER BREAK</span></td>
<td><p class="first">Reverting behavior introduced in AtlasDB 0.11.0 so the <code class="docutils literal"><span class="pre">ssl</span></code> property continues to take precedence over the <code class="docutils literal"><span class="pre">sslConfiguration</span></code> block to allow back-compatibility when using SSL with CassandraKVS.
This means that products can add default truststore and keystore configuration to their AtlasDB config without overriding previously made SSL decisions (setting <code class="docutils literal"><span class="pre">ssl:</span> <span class="pre">false</span></code> should cause SSL to not be used).</p>
<p class="last">This only affects end users who have deployed products with AtlasDB 0.11.0 or 0.11.1; users upgrading from earlier versions will not see changed behavior.
See <a class="reference internal" href="../configuration/key_value_service_configs/cassandra_key_value_service_config.html#cass-config-ssl"><span class="std std-ref">Communicating Over SSL</span></a> for details on how to configure CassandraKVS with SSL.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/745">Pull Request</a>)</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-11-1">
<h2>v0.11.1<a class="headerlink" href="#v0-11-1" title="Permalink to this headline">¶</a></h2>
<p>28 Jul 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Removed a check enforcing a leader block config when one was not required.
This prevents AtlasDB 0.11.0 clients from starting if a leader configuration is not specified (i.e. single node clusters).
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/741">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Updated schema table generation to optimize reads with no ColumnSelection specified against tables with fixed columns.
To benefit from this improvement you will need to re-generate your schemas.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/713">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-11-0">
<h2>v0.11.0<a class="headerlink" href="#v0-11-0" title="Permalink to this headline">¶</a></h2>
<p>27 Jul 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Clarified the logging when multiple timestamp servers are running to state that CLIs could be causing the issue.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/719">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-changed">CHANGED</span></td>
<td>Updated cassandra client from 2.2.1 to 2.2.7 and cassandra docker testing version from 2.2.6 to 2.2.7.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/699">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td><p class="first">The leader config now contains a new <code class="docutils literal"><span class="pre">lockCreator</span></code> option, which specifies the single node that creates the locks table when starting your cluster for the very first time.
This configuration prevents an extremely unlikely race condition where multiple clients can create the locks table simultaneously.
Full details on the failure scenario can be found on <a class="reference external" href="https://github.com/palantir/atlasdb/issues/444#issuecomment-221612886">#444</a>.</p>
<p>If left blank, <code class="docutils literal"><span class="pre">lockCreator</span></code> will default to the first host in the <code class="docutils literal"><span class="pre">leaders</span></code> list, but we recommend setting this explicitly to ensure that the lockCreater is the same value across all your clients for a specific service.
This configuration is only relevant for new clusters and does not affect existing AtlasDB clusters.</p>
<p class="last">Full details for configuring the leader block, see <a class="reference external" href="https://palantir.github.io/atlasdb/html/configuration/cassandra_KVS_configuration.html">cassandra configuration</a>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/594">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>A utility method was removed in the previous release, breaking an internal product that relied on it.
This method has now been added back.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/661">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Removed unnecessary error message for missing _timestamp metadata table.
_timestamp is a hidden table, and it is expected that _timestamp metadata should not be retrievable from public API.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/716">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Trace logging is more informative and will log all failed calls.
To enable trace logging, see <a class="reference external" href="https://palantir.github.io/atlasdb/html/configuration/enabling_cassandra_tracing.html#enabling-cassandra-tracing">Enabling Cassandra Tracing</a>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/700">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-new">NEW</span></td>
<td>The Cassandra KVS now supports specifying SSL options via the new <code class="docutils literal"><span class="pre">sslConfiguration</span></code> block, which takes precedence over the now deprecated <code class="docutils literal"><span class="pre">ssl</span></code> property.
The <code class="docutils literal"><span class="pre">ssl</span></code> property will be removed in a future release, and consumers leveraging the Cassandra KVS are encouraged to use the <code class="docutils literal"><span class="pre">sslConfiguration</span></code> block instead.
See the <a class="reference external" href="https://palantir.github.io/atlasdb/html/configuration/cassandra_KVS_configuration.html#communicating-over-ssl">Cassandra SSL Configuration</a> documentation for more details.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/638">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-10-0">
<h2>v0.10.0<a class="headerlink" href="#v0-10-0" title="Permalink to this headline">¶</a></h2>
<p>13 Jul 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-changed">CHANGED</span></td>
<td>Updated HikariCP dependency from 2.4.3 to 2.4.7 to comply with updates in internal products.
Details of the HikariCP changes can be found <a class="reference external" href="https://github.com/brettwooldridge/HikariCP/blob/dev/CHANGES">here</a>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/662">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-new">NEW</span></td>
<td><p class="first">AtlasDB currently allows you to create dynamic columns (wide rows), but you can only retrieve entire rows or specific columns.
Typically with dynamic columns, you do not know all the columns you have in advance, and this features allows you to page through dynamic columns per row, reducing pressure on the underlying KVS.
Products or clients (such as AtlasDB Sweep) making use of wide rows should consider using <code class="docutils literal"><span class="pre">getRowsColumnRange</span></code> instead of <code class="docutils literal"><span class="pre">getRows</span></code> in <code class="docutils literal"><span class="pre">KeyValueService</span></code>.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/582">Pull Request</a>)</p>
<p class="last">Note: This is considered a beta feature and is not yet being used by AtlasDB Sweep.</p>
</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>We properly check that cells are not set to empty (zero-byte) or null.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/663">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Cassandra client connection pooling will now evict idle connections over a longer period of time and has improved logic for deciding whether or not a node should be blacklisted.
This should result in less connection churn and therefore lower latency.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/667">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-9-0">
<h2>v0.9.0<a class="headerlink" href="#v0-9-0" title="Permalink to this headline">¶</a></h2>
<p>11 Jul 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-breaking">DEV BREAK</span></td>
<td><p class="first">Inserting an empty (size = 0) value into a <code class="docutils literal"><span class="pre">Cell</span></code> will now throw an <code class="docutils literal"><span class="pre">IllegalArgumentException</span></code>. (<a class="reference external" href="https://github.com/palantir/atlasdb/issues/156">#156</a>) Likely empty
values include empty strings and empty protobufs.</p>
<p>AtlasDB cannot currently distinguish between empty and deleted cells. In previous versions of AtlasDB, inserting
an empty value into a <code class="docutils literal"><span class="pre">Cell</span></code> would delete that cell. Thus, in this snippet,</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Transaction</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">table</span><span class="o">,</span> <span class="n">ImmutableMap</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">myCell</span><span class="o">,</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">0</span><span class="o">]))</span>
<span class="n">Transaction</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">table</span><span class="o">,</span> <span class="n">ImmutableSet</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">myCell</span><span class="o">)).</span><span class="na">get</span><span class="o">(</span><span class="n">myCell</span><span class="o">)</span>
</pre></div>
</div>
<p>the second line will return <code class="docutils literal"><span class="pre">null</span></code> instead of a zero-length byte array.</p>
<p>To minimize confusion, we explicitly disallow inserting an empty value into a cell by throwing an
<code class="docutils literal"><span class="pre">IllegalArgumentException</span></code>.</p>
<p>In particular, this change will break calls to <code class="docutils literal"><span class="pre">Transaction.put(TableReference</span> <span class="pre">tableRef,</span> <span class="pre">Map&lt;Cell,</span> <span class="pre">byte[]&gt;</span> <span class="pre">values)</span></code>,
as well as generated code which uses this method, if any entry in <code class="docutils literal"><span class="pre">values</span></code> contains a zero-byte array. If your
product does not need to distinguish between empty and non-existent values, simply make sure all the <code class="docutils literal"><span class="pre">values</span></code>
entries have positive length. If the distinction is necessary, you will need to explicitly differentiate the
two cases (for example, by introducing a sentinel value for empty cells).</p>
<p>If any code deletes cells by calling <code class="docutils literal"><span class="pre">Transaction.put(...)</span></code> with an empty array, use
<code class="docutils literal"><span class="pre">Transaction.delete(...)</span></code> instead.</p>
<p class="last"><em>Note</em>: Existing cells with empty values will be interpreted as deleted cells, and will not lead to Exceptions when read.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/524">Pull Request</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>The warning emitted when an attempted leadership election fails is now more descriptive.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/630">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td><p class="first">Code generation for the <code class="docutils literal"><span class="pre">hashCode</span></code> of <code class="docutils literal"><span class="pre">*IdxColumn</span></code> classes now uses <code class="docutils literal"><span class="pre">deepHashCode</span></code> for its arrays such that it returns
consistent hash codes for use with hash-based collections (HashMap, HashSet, HashTable).
This issue will only appear if you are instantiating columns in multiple places and storing columns in hash collections.</p>
<p class="last">If you are using <a class="reference external" href="https://palantir.github.io/atlasdb/html/schemas/tables_and_indices.html#indices">Indices</a> we recommend you upgrade as a precaution and ensure you are not relying on logic related to the <code class="docutils literal"><span class="pre">hashCode</span></code> of auto-generated <code class="docutils literal"><span class="pre">*IdxColumn</span></code> classes.
You will need to regenerate your schema code in order to see this fix.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/600">Pull Request</a>)</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-8-0">
<h2>v0.8.0<a class="headerlink" href="#v0-8-0" title="Permalink to this headline">¶</a></h2>
<p>5 Jul 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Some logging was missing important information due to use of the wrong substitution placeholder. This version should be taken in preference to 0.7.0 to ensure logging is correct.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/642">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-7-0">
<h2>v0.7.0<a class="headerlink" href="#v0-7-0" title="Permalink to this headline">¶</a></h2>
<p>4 Jul 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-new">NEW</span></td>
<td>AtlasDB can now be backed by Postgres via DB KVS. This is a very early release for this feature, so please contact us if you
plan on using it. Please see <a class="reference internal" href="../configuration/key_value_service_configs/postgres_key_value_service_config.html#postgres-configuration"><span class="std std-ref">the documentation</span></a> for more details.</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>The In Memory Key Value Service now makes defensive copies of any data stored or retrieved. This may lead to a slight performance degradation to users of In Memory Key Value Service.
In Memory Key Value Service is recommended for testing environments only and production instances should use DB KVS or Cassandra KVS for data that needs to be persisted.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/552">Pull Request</a>)</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>AtlasDB will no longer log incorrect errors stating &#8220;Couldn&#8217;t grab new token ranges for token aware cassandra mapping&#8221; when running against a single node and single token Cassandra cluster.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/634">Pull Request</a>)</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-improved">IMPROVED</span></td>
<td>Read heavy workflows with Cassandra KVS will now use substantially less heap. In worst-case testing this change resulted in a 10-100x reduction in client side heap size.
However, this is very dependent on the particular scenario AtlasDB is being used in and most consumers should not expect a difference of this size.
(<a class="reference external" href="https://github.com/palantir/atlasdb/pull/568">Pull Request</a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-6-0">
<h2>v0.6.0<a class="headerlink" href="#v0-6-0" title="Permalink to this headline">¶</a></h2>
<p>26 May 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>A potential race condition could cause timestamp allocation to never complete on a particular node (#462).</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>An innocuous error was logged once for each TransactionManager about not being able to allocate enough timestamps.
The error has been downgraded to INFO and made less scary.</td>
</tr>
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Serializable Transactions that read a column selection could consistently report conflicts when there were none.</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>An excessively long Cassandra related logline was sometimes printed (#501).</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-5-0">
<h2>v0.5.0<a class="headerlink" href="#v0-5-0" title="Permalink to this headline">¶</a></h2>
<p>16 May 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-changed">CHANGED</span></td>
<td>Only bumping double minor version in artifacts for long-term stability fixes.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="v0-4-1">
<h2>v0.4.1<a class="headerlink" href="#v0-4-1" title="Permalink to this headline">¶</a></h2>
<p>17 May 2016</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Change</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Prevent _metadata tables from triggering the Cassandra 2.x schema mutation bug <a class="reference external" href="https://github.com/palantir/atlasdb/issues/431">431</a> (<a class="reference external" href="https://github.com/palantir/atlasdb/issues/444">444</a> not yet fixed).</td>
</tr>
<tr class="row-odd"><td><span class="changetype changetype-fixed">FIXED</span></td>
<td>Required projects are now Java 6 compliant.</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="release-process.html" class="btn btn-neutral float-right" title="Release Process" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Releases" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Palantir Technologies.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'develop',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>